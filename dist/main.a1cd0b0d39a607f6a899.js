!function(e){function n(n){for(var o,r,s=n[0],l=n[1],p=n[2],d=0,g=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&g.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(c&&c(n);g.length;)g.shift()();return a.push.apply(a,p||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],o=!0,s=1;s<t.length;s++){var l=t[s];0!==i[l]&&(o=!1)}o&&(a.splice(n--,1),e=r(r.s=t[0]))}return e}var o={},i={0:0},a=[];function r(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=e,r.c=o,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=n,s=s.slice();for(var p=0;p<s.length;p++)n(s[p]);var c=l;a.push([20,1]),t()}({20:function(e,n,t){"use strict";t.r(n),function(e){t(21),t(23),t(29);var n,o,i,a,r,s,l,p,c,d,g,m,u,f,h,b=t(19),y=t.n(b),v=(t(47),t(4)),x=t.n(v),_=(t(0),t(1)),w=t.n(_),S=t(2),z=(t(51),t(55),{}),N={},O=!1,T=spotURLinternal;function I(n,t){if(console.log("In showGraph",n,t,o),o&&o.series)return console.log("CHART EXISTS"),o.addSeries(n,!1),void o.redraw();console.log("SHOULD BE HERE");var i={chart:{type:"line",spacingTop:20,spacingLeft:0,spacingBottom:0,zoomType:"x"},title:{text:""},credits:{enabled:!1},xAxis:{type:"datetime",labels:{formatter:function(){return x.a.dateFormat("%m/%d",this.value)},align:"center",tickInterval:1728e5}},yAxis:{title:{text:t}},series:[n]};"Discharge"===n.name&&(i.yAxis.type="logarithmic"),"Water level, depth LSD"===n.name&&(i.yAxis.reversed=!0),setTimeout((function(){o=x.a.chart("graphContainer",i),e("#graphContainer").show(),console.log("END OF SHOWGRAPH",o)}),500)}function D(e){var t=y()(s.toGeoJSON());console.log("sites selection geojson:",JSON.stringify(s.toGeoJSON()));var o=L.geoJSON(t).bindPopup(e,{minWidth:200});r.addLayer(o),n.flyToBounds(r.getBounds())}function G(n){var t=L.icon({iconUrl:"./images/symbols/selected_site_yellow.png",iconSize:[64,64]});e.each(z,(function(e,o){if(o.properties.siteID===n){var i=L.marker(o.getLatLng(),{icon:t,pane:"shadowPane"});s.addLayer(i)}}))}function k(e){return console.log("in select go2:",e),"Go2"===e?(C(go2warningsJSON),"Show Go2"):"Go2Lite"===e?(C(go2liteWarningsJSON),"Show Go2Lite"):"Go2Fast"===e?(C(go2predictedWarningsJSON),"Show Go2Fast"):"Go2FastR"===e?(C(go2predictedWarningsJSON_NWM),"Show Go2FastR"):void 0}function C(n){var t;s.clearLayers(),r.clearLayers(),e.getJSON(n,(function(n){e("#loading").hide(),e("#time").html("Data queried: "+n.metadata.created),e.each(z,(function(e,n){n.properties.popupContent=n.properties.defaultPopupContent,t=L.icon({iconUrl:"./images/symbols/dot_small.png",iconSize:[8,8]}),n.setIcon(t)})),e.each(n.SitesCollection,(function(e,n){if(void 0===z[n.items.SiteID])console.warn("This site does not exist in TripList.json: ",n.items.SiteID);else{var o=z[n.items.SiteID],i=o.properties.siteType,a="",r=[];for(var s in n.items.goflags){a=a+'<div class="alert alert-warning"><b>'+n.items.goflags[s].go2flag+":</b> "+n.items.goflags[s].go2msg+"</div>";var l=n.items.goflags[s].go2flag;"iGH"==n.items.goflags[s].go2flag&&-1!=n.items.goflags[s].go2msg.indexOf("meas")&&(l="iGH_meas"),r.push(l)}if(-1!=U("1DCP",r)||-1!=U("2DCP",r)||-1!=U("1GH",r)||-1!=U("2GH",r)||-1!=U("MODEM",r))t=r.length>1?L.icon({iconUrl:"images/symbols/multi_"+i+"_red.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+i+"_red.png",iconSize:[22,30]});else if(-1!=U("1LRAT",r)||-1!=U("1HRAT",r))t=r.length>1?L.icon({iconUrl:"images/symbols/multi_"+i+"_orange.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+i+"_orange.png",iconSize:[22,30]});else if(-1!=U("2LRAT",r)||-1!=U("2HRAT",r)||-1!=U("2RRAT",r))t=r.length>1?L.icon({iconUrl:"images/symbols/multi_"+i+"_yellow.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+i+"_yellow.png",iconSize:[22,30]});else if(-1!=U("3LRAT",r)||-1!=U("3HRAT",r))t=r.length>1?L.icon({iconUrl:"images/symbols/multi_"+i+"_green.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+i+"_green.png",iconSize:[22,30]});else if(-1!=U("4RAT",r))t=r.length>1?L.icon({iconUrl:"images/symbols/multi_"+i+"_blue.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+i+"_blue.png",iconSize:[22,30]});else if(-1!=U("iGEN",r)||-1!=U("iGH_meas",r))t=r.length>1?L.icon({iconUrl:"images/symbols/multi_"+i+"_violet.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+i+"_violet.png",iconSize:[22,30]});else if(-1!=U("1TIME",r))t=r.length>1?L.icon({iconUrl:"images/symbols/multi_"+i+"_black.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+i+"_black.png",iconSize:[22,30]});else if(-1!=U("iWEB",r))t=r.length>1?L.icon({iconUrl:"images/symbols/multi_"+i+"_brown.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+i+"_brown.png",iconSize:[22,30]});else if(-1!=U("iDCP",r)||-1!=U("iGH",r)||-1!=U("SPIKE",r)||-1!=U("3DCP",r)||-1!=U("4DCP",r)||-1!=U("3GH",r)||-1!=U("4GH",r))t=r.length>1?L.icon({iconUrl:"images/symbols/multi_"+i+"_pink.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+i+"_pink.png",iconSize:[22,30]});else if(-1!=U("GAP",r)||-1!=U("SHFT",r)||-1!=U("COMP",r))t=r.length>1?L.icon({iconUrl:"images/symbols/multi_"+i+"_white.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+i+"_white.png",iconSize:[22,30]});else{if(-1==U("2TIME",r)&&-1==U("3TIME",r)&&-1==U("4TIME",r))return;t=r.length>1?L.icon({iconUrl:"images/symbols/multi_"+i+"_gray.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+i+"_gray.png",iconSize:[22,30]})}o.properties.popupContent+="</br>"+a,o.setIcon(t)}}))}))}function M(){e("#togglePeople").toggleClass("btn-secondary btn-primary"),(O=!O)?(A(),h=setInterval(A,15e4)):(n.removeLayer(p),clearInterval(h))}function A(){n.hasLayer(p)||n.addLayer(p),console.log("ABOUT TO LOAD PEOPLE WITH THIS URL:",T),e.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:T,dataType:"json",success:function(n){!function(n){if(n.length>0){p.clearLayers();var t=n.filter((function(e){return!this[e.messengerId]&&(this[e.messengerId]=!0)}),Object.create(null));console.log("Got locations:",t),e(t).each((function(e,n){var t,o=[parseFloat(n.latitude),parseFloat(n.longitude)],i=n.messengerName,a=i.split("_"),r=!1;3===a.length&&(r=!0,i=a[0]+"_"+a[1],t=a[2]);var s=w()(n.dateTime),l=s.format("MMMM Do YYYY, h:mm:ss a"),c=s.valueOf()/1e3,d=(new Date).getTime()/1e3,g=iconLookup[i];g||console.warn("No icon for: "+i);var m=L.icon({iconUrl:"./images/person_icons/"+g+".png",iconSize:[40,40]}),u="User Data</br>";r&&(u=t+"</br>"),u+="<b>ESN:</b> "+n.messengerId+"</br><b>Timestamp:</b> "+l+"</br><b>GroupID:</b> "+i+"</br><b>Type:</b> "+n.messageType+"</br><b>Message:</b> "+n.messageContent+"</br><b>Battery:</b> "+n.batteryState;var f=L.marker(o,{zIndexOffset:1e3,icon:m}).bindPopup(u);d-c<129600?(p.addLayer(f),console.log("Adding:",n.messengerId)):console.log("Skipped for no update:",n.messengerId)}))}else console.log("Error retreiving user locations")}(n)},error:function(e,n,t){console.error("Unexpected error has occurred: "+e.statusText+" ("+e.status+")"),T=spotURLexternal,A()}})}function U(e,n){for(var t=0;t<n.length;t++)if(n[t].match(new RegExp(e,"i")))return t;return-1}function j(){e("#NWSlegend").empty(),e("#radar-legend").hide(),e("#past-rainfall-legend").hide(),e("#forecast-rainfall-legend").hide(),n.removeLayer(f),n.removeLayer(u),n.removeLayer(c),n.removeLayer(d),n.removeLayer(g),n.removeLayer(m)}x.a.setOptions({global:{useUTC:!1},lang:{thousandsSep:","}}),e(document).ready((function(){var t,h,b;console.log("Application Information: production version 1.3.0"),e("#appVersion").html("Application Information: production version 1.3.0"),e.ajaxQ=(t=0,h={},e(document).ajaxSend((function(e,n){n._id=++t,h[n._id]=n})),e(document).ajaxComplete((function(e,n){delete h[n._id]})),{abortAll:function(){var n=[];return e.each(h,(function(e,t){n.push(t._id),t.abort()})),n}}),n=L.map("mapDiv",{zoomControl:!1}),L.control.zoom({position:"topright"}).addTo(n),L.control.scale().addTo(n),a=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",maxZoom:16}).addTo(n),n.setView([MapY,MapX],MapZoom),r=L.featureGroup().addTo(n),s=L.featureGroup().addTo(n),l=L.featureGroup().addTo(n),p=L.featureGroup().addTo(n),u=L.layerGroup(),f=L.layerGroup(),c=L.layerGroup(),d=L.layerGroup(),g=L.layerGroup(),m=L.layerGroup(),b=L.icon({iconUrl:"./images/symbols/dot_small.png",iconSize:[8,8]}),e.getJSON(siteListJSON,(function(n){e.each(n.SitesCollection,(function(n,t){z[t.SiteID]=L.marker([t.Attributes.latDD,t.Attributes.lonDD],{icon:b}),z[t.SiteID].properties={},z[t.SiteID].properties.siteID=t.SiteID,z[t.SiteID].properties.siteName=t.Attributes.station_nm,z[t.SiteID].properties.siteType=t.Attributes.site_type,z[t.SiteID].properties.nws_id=t.Attributes.nws_id,z[t.SiteID].properties.office=t.Attributes.Office,z[t.SiteID].properties.popupContent="<b>"+t.SiteID+"</b></br></br>"+t.Attributes.station_nm+'</br><a href="https://waterdata.usgs.gov/nwis/inventory/?site_no='+t.SiteID+'" target="_blank">Access Data</a></br><div id="graphContainer" style="width:100%; height:200px;display:none;"></div><div class="container" style="width:100%;"><div class="row"><div class="col-md-4 graphLoader" id="nwisGraphLoader"><p><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw graph-loader"></i>Loading NWIS...</p></div><div class="col-md-4 graphLoader" id="ahpsGraphLoader"><p><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw graph-loader"></i>Loading AHPS...</p></div><div class="col-md-4 graphLoader" id="nwmGraphLoader"><p><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw graph-loader"></i>Loading NWM..</p></div></div></div>',z[t.SiteID].properties.defaultPopupContent=z[t.SiteID].properties.popupContent,l.addLayer(z[t.SiteID]),0==e("#centerSelect option:contains('"+t.Attributes.Office+"')").length&&e("#centerSelect").append(e("<option></option>").attr("value",t.Attributes.Office).text(t.Attributes.Office))})),e.getJSON(tripListJSON,(function(n){N=n.TripsCollection,e.each(N,(function(n,t){e.each(t,(function(n,t){e.each(t.Trip,(function(n,o){e.each(o.Sites,(function(e,n){z[n]&&(z[n].properties.tripName=o.TripName,z[n].properties.tripOwner=o.TripOwner,z[n].properties.popupContent="<b>"+n+"</b></br></br>"+z[n].properties.siteName+'</br><a href="https://waterdata.usgs.gov/nwis/inventory/?site_no='+n+'" target="_blank">Access Data</a></br></br><b>Office: </b>'+t.OfficeName+"</br><b>Trip Name: </b>"+z[n].properties.tripName+"</br><b>Trip Owner: </b>"+z[n].properties.tripOwner+'<div id="graphContainer" style="width:100%; height:200px;display:none;"></div><div class="container" style="width:100%;"><div class="row"><div class="col-md-4 graphLoader" id="nwisGraphLoader"><p><i class="fa fa-cog fa-spin fa-3x fa-fw graph-loader"></i>Loading NWIS...</p></div><div class="col-md-4 graphLoader" id="ahpsGraphLoader"><p><i class="fa fa-cog fa-spin fa-3x fa-fw graph-loader"></i>Loading AHPS...</p></div><div class="col-md-4 graphLoader" id="nwmGraphLoader"><p><i class="fa fa-cog fa-spin fa-3x fa-fw graph-loader"></i>Loading NWM..</p></div></div></div>',z[n].properties.defaultPopupContent=z[n].properties.popupContent)}))}))}))}))})),C(go2warningsJSON)})),f.addLayer(L.tileLayer("https://{s}.agron.iastate.edu/cache/tile.py/1.0.0/nexrad-n0q-900913/{z}/{x}/{y}.png",{subdomains:["mesonet","mesonet1","mesonet2","mesonet3"],opacity:.7})),u.addLayer(Object(S.b)({url:"https://idpgis.ncep.noaa.gov/arcgis/rest/services/NWS_Observations/radar_base_reflectivity/MapServer",opacity:.7,f:"image"})),c.addLayer(L.tileLayer("https://{s}.agron.iastate.edu/cache/tile.py/1.0.0/q2-n1p-900913/{z}/{x}/{y}.png",{subdomains:["mesonet","mesonet1","mesonet2","mesonet3"],opacity:.7})),d.addLayer(L.tileLayer("https://{s}.agron.iastate.edu/cache/tile.py/1.0.0/q2-p24h-900913/{z}/{x}/{y}.png",{subdomains:["mesonet","mesonet1","mesonet2","mesonet3"],opacity:.7})),g.addLayer(Object(S.b)({url:"https://idpgis.ncep.noaa.gov/arcgis/rest/services/NWS_Forecasts_Guidance_Warnings/wpc_qpf/MapServer",opacity:.7,f:"image",layers:[7]})),m.addLayer(Object(S.b)({url:"https://idpgis.ncep.noaa.gov/arcgis/rest/services/NWS_Forecasts_Guidance_Warnings/wpc_qpf/MapServer",opacity:.7,f:"image",layers:[1]})),e(".collapse.show").each((function(){e(this).prev(".card-header").find("svg").addClass("fa-minus").removeClass("fa-plus")})),e(".collapse").on("show.bs.collapse",(function(){e(this).prev(".card-header").find("svg").removeClass("fa-plus").addClass("fa-minus")})).on("hide.bs.collapse",(function(){e(this).prev(".card-header").find("svg").removeClass("fa-minus").addClass("fa-plus")})),e("#centerSelect").on("change",(function(){var t=e("#centerSelect :selected").text();e('#tripSelect option[value!="default"]').remove(),function(t){s.clearLayers(),r.clearLayers(),l.eachLayer((function(e){e.properties.office===t&&G(e.properties.siteID)})),s.getLayers().length<=2?n.flyToBounds(s.getBounds()):D(t);e("#tripSelect").show(),e.each(N,(function(n,o){-1!==o.WSC.OfficeName.indexOf(t)&&e.each(o.WSC.Trip,(function(n,t){e("#tripSelect").append(e("<option></option>").attr("value",t.TripOwner).text(t.TripName))}))}))}(t)})),e("#tripSelect").on("change",(function(){!function(t){s.clearLayers(),r.clearLayers(),e.each(N,(function(n,o){-1!==o.WSC.OfficeName.indexOf(t.tripCenter)&&e.each(o.WSC.Trip,(function(n,o){o.TripName==t.tripName&&e.each(o.Sites,(function(e,n){G(n)}))}))})),s.getLayers().length<=2?n.flyToBounds(s.getBounds()):D(t.tripName)}({tripName:e("#tripSelect :selected").text(),tripOwner:e("#tripSelect :selected").attr("value"),tripCenter:e("#centerSelect :selected").text()})})),e("#go2typeSelect").on("change",(function(){k(e("#go2typeSelect :selected").text())})),e(".basemapBtn").click((function(){e(".basemapBtn").removeClass("slick-btn-selection"),e(this).addClass("slick-btn-selection"),function(e){switch(e){case"Streets":e="Streets";break;case"Satellite":e="Imagery";break;case"Topo":e="Topographic";break;case"Terrain":e="Terrain";break;case"Gray":e="Gray";break;case"NatGeo":e="NationalGeographic";break;case"Verizon":e="Verizon"}a&&n.removeLayer(a);if("Verizon"===e){var t=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),o=L.tileLayer("https://s0{s}.cellmaps.com/1.3/tiles/1.0.0/cellmap/{z}/{x}/{y}.png?map=verizon&base=false&llist=vzw_direct_gsm_1,vzw_direct_gsm_2,vzw_direct_gprs_1,vzw_direct_gprs_2,vzw_direct_umts_global_1,vzw_direct_umts_global_2,vzw_direct_umts_americas_1,vzw_direct_umts_americas_2,vzw_lte_1,vzw_lte_2_1,vzw_lte_2_2,vzw_lte_owned,vzw_intl_5g&color=f6f6f6|f6f6f6|d9d9d9|d9d9d9|969696|969696|969696|969696|e16e51|e16e51|e16e51|e16e51|d52b1e&generic=true",{tms:!0,opacity:.7,attribution:"https://verizon.cellmaps.com/"});a=L.layerGroup([t,o]),n.addLayer(a)}else a=Object(S.a)(e),n.addLayer(a),i&&n.removeLayer(i),"Gray"!==e&&"Imagery"!==e&&"Terrain"!==e||(i=Object(S.a)(e+"Labels"),n.addLayer(i))}(this.id.replace("btn",""))})),e("#mobile-main-menu").click((function(){e("body").toggleClass("isOpenMenu")})),e("#togglePeople").click((function(){M()})),e(".radarBtn").click((function(){(console.log("radarBtn click",e(this).val()),e(this).hasClass("slick-btn-selection"))?(e(this).removeClass("slick-btn-selection"),j()):(e(".radarBtn").removeClass("slick-btn-selection"),e(this).addClass("slick-btn-selection"),function(t){console.log("toggle radar:",t),j(),"reflectivity_NWS_conus_layer"==t&&(n.addLayer(f),e("#radar-legend").show());"NWS_radar_base_reflectivity"==t&&(n.addLayer(u),e("#radar-legend").show());"Q2_1_hour_precipitation"==t&&(n.addLayer(c),e("#past-rainfall-legend").show());"Q2_24_hour_precipitation"==t&&(n.addLayer(d),e("#past-rainfall-legend").show());"Rainfall_forecast_6_hour"==t&&(n.addLayer(g),e("#forecast-rainfall-legend").show());"Rainfall_forecast_24_hour"==t&&(n.addLayer(m),e("#forecast-rainfall-legend").show())}(e(this).val()))})),e("#resetView").click((function(){!function(){e("#centerSelect").val(e("#centerSelect option:first-child").val()),e("#tripSelect").find("option:gt(0)").remove(),e("#togglePeople").hasClass("btn-primary")&&M();e("#go2typeSelect").val("full"),k("Go2"),s.clearLayers(),r.clearLayers(),j(),e(".radarBtn").removeClass("active"),n.setView([MapY,MapX],7)}()})),e("#aboutButton").click((function(){e("#aboutModal").modal("show")})),l.on("click",(function(n){!function(n){if(console.log("OPENING POPUP...",n),e("#graphContainer").remove(),e(".graphLoader").remove(),o=void 0,e.ajaxQ.abortAll(),n.layer.bindPopup(n.layer.properties.popupContent,{minWidth:300}).openPopup(),"sw"===n.layer.properties.siteType||"gw"===n.layer.properties.siteType){e.getJSON(USGSwaterServicesURL+n.layer.properties.siteID+"&parameterCd=00060,00065,62614,62615,62619,72214,72264,72019&period=P7D",(function(t){if(!t.data||t.data[0].time_series_data.length<=0)return setTimeout((function(){e("#nwisGraphLoader").html("<p><i>No NWIS waterservices data was found</i></p>"),e("#ahpsGraphLoader").remove(),e("#nwmGraphLoader").remove()}),500),void console.log("Found an NWIS site, but it had no data in waterservices: ",n.layer.properties.siteID);var i,a;console.log("NWIS data:",t);var r,s=!1;if(e.each(t.data,(function(e,n){-1!==n.parameter_name.indexOf("Discharge")?(s=!0,i="Discharge, cfs",r={tooltip:{pointFormat:a="Discharge: {point.y} cfs"},showInLegend:!0,id:"usgs-series",data:n.time_series_data,name:"USGS Measured discharge"}):-1!==n.parameter_name.indexOf("Elevation")?(n.parameter_name+=", ft",n.loc_web_ds.length>0?n.parameter_name+=" ("+n.loc_web_ds+")":i=n.parameter_name,a=n.parameter_name+": {point.y}",r={tooltip:{pointFormat:a},showInLegend:!1,id:"usgs-series",data:n.time_series_data,name:n.parameter_name}):"Water level, depth LSD"===n.parameter_name?(i="Elevation, ft",r={tooltip:{pointFormat:a="Elevation: {point.y} ft"},showInLegend:!1,id:"usgs-series",data:n.time_series_data,name:n.parameter_name}):-1===n.parameter_name.indexOf("Gage height")||s||(n.parameter_name+=", ft",n.loc_web_ds.length>0?n.parameter_name+=" ("+n.loc_web_ds+")":i=n.parameter_name,a=n.parameter_name+": {point.y}",r={tooltip:{pointFormat:a},showInLegend:!1,id:"usgs-series",data:n.time_series_data,name:n.parameter_name})})),!s)return o=void 0,console.log("This is a gw or non disharge site, so were done"),e(".graphLoader").remove(),void I(r,i);if(e("#nwisGraphLoader").remove(),I(r,i),z[n.layer.properties.siteID].properties.nws_id&&"n/a"!==z[n.layer.properties.siteID].properties.nws_id){console.log("Found AHPS site: ",z[n.layer.properties.siteID].properties.nws_id,"  Querying AHPS...");var l=AHPSurl+n.layer.properties.nws_id+"&output=xml";console.log("AHPS page url:",l),location.hostname.match("wim")&&(l=proxyURL+l),e.ajax({url:l,dataType:"xml",success:function(t){console.log("AHPS Response:",t);var o=[],r=!1;if(e(t).find("forecast").find("datum").each((function(){var n=e(this).find("valid").text();if(!s&&"Stage"===e(this).find("primary").attr("name")){var t=e(this).find("primary").attr("units"),i=parseFloat(e(this).find("primary").text());r=!0}if(s&&"Flow"===e(this).find("secondary").attr("name")){t=e(this).find("secondary").attr("units"),i=parseFloat(e(this).find("secondary").text());"kcfs"===t&&(i*=1e3),r=!0}if(r){var a=new Date(n)/1;o.push([a,i])}})),o.sort(),o.length<=1)return console.log("Found an AHPS Site, but no AHPS data was found: ",n.layer.properties.siteID,n.layer.properties.ahpsID),void e("#ahpsGraphLoader").remove();var l={tooltip:{pointFormat:a},showInLegend:!0,color:"#009933",name:"NWS River Forecast (AHPS)",id:"ahps-series",data:o};e("#ahpsGraphLoader").remove(),I(l,i)}})}else console.log("This is not an AHPS site:",n.layer.properties.siteID),e("#ahpsGraphLoader").remove();var p=Object(S.c)({url:NWMmapServiceURL}),c="site_no = '"+n.layer.properties.siteID+"'";e("#graphContainer").append("LOADING NWM DATA... Please Wait"),p.where(c),p.run((function(t,o,r){if(t)console.log(t);else if(0!=o.features.length){console.log("NWM Feature query results:",o);var s=o.features[0].properties.feature_id;22743145==s&&(s=22743167),console.log("Found NWM reach code: ",s,"  Querying NWM...");var l=NWMshortRangeURL+s;console.log("NWM page url:",l),location.hostname.match("wim")&&(l=proxyURL+l),e.ajax({url:l,dataType:"json",success:function(t){console.log("NWM Short Range Response:",t);var r=[];t[0].data.length;t[0]["reference-time"],t[0].units;e.each(t[0].data,(function(e,n){var t=n["forecast-time"],o=n.value,i=new Date(t)/1;r.push([i,o])})),r.sort();var l=r[r.length-1];console.log("Last short range NWM value:",l);var p=NWMmediumRangeURL+s;location.hostname.match("wim")&&(p=proxyURL+p),e.ajax({url:p,dataType:"json",success:function(t){console.log("NWM Medium Range Response:",t),t[0].data.length>0&&!0;t[0]["reference-time"],t[0].units;e.each(t[0].data,(function(e,n){var t=n["forecast-time"],o=n.value,i=new Date(t)/1;i>l[0]&&r.push([i,o])})),r.sort(),r.length<=1&&(console.log("Found a NWM Site, but no NWM data was found: ",n.layer.properties.siteID,n.layer.properties.nwm_reach_code),e("#nwmGraphLoader").remove(),reteurn);var s={tooltip:{pointFormat:a},showInLegend:!0,color:"#AF18EC",name:"NWM River Forecast for "+o.features[0].properties.site_name,id:"nwm-series",data:r};e("#nwmGraphLoader").remove(),I(s,i)}})}})}else console.log("Did not find NWM site for USGS Site: ",n.layer.properties.siteID)}))}))}}(n)})),n.on("popupopen",(function(e){var t=n.project(e.target._popup._latlng);t.y-=e.target._popup._container.clientHeight/2,n.panTo(n.unproject(t),{animate:!0})})),setTimeout((function(){n.invalidateSize()}),500)}))}.call(this,t(8))},29:function(e,n,t){var o=t(5),i=t(30);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};o(i,a);e.exports=i.locals||{}},30:function(e,n,t){(n=t(6)(!1)).push([e.i,'/* ======================== \n=========================== \nBase app layout \n=========================== \n=========================== */\nhtml, body, #mapDiv {\n\tpadding: 0;\n\tmargin: 0;\n\theight: 100%;\n\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n}\n.leaflet-popup-content-wrapper {\n\tborder-radius: 0px;\n}\n.app-wrapper{\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\twidth: 100%;\n}\n/* ======================== \n=========================== \nUSGS Navigation Bar \n=========================== \n=========================== */\n.top-bar{\n\tdisplay: flex;\n\tjustify-content: space-between;\n\twidth: 100%;\n\tmin-width: 100%;\n\tbackground-color: #022C55;\n\tbox-sizing: border-box;\n\tpadding: 0 15px;\n\theight: 58px;\n}\n/* Menu button - only shown on mobile */\n.top-bar-mobile-menu-button{\n\tdisplay: none;\n\tflex-direction: column;\n\tjustify-content: center;\n\tcolor: white;\n\twidth: 40px;\n\ttext-align: center;\n\tfont-size: 24px;\n\tmargin-right: 15px;\n}\n.top-bar-mobile-menu-button .mobile-icon-open{\n\twidth: 100%;\n\ttext-align: center;\n}\n.top-bar-mobile-menu-button .mobile-icon-close{\n\tdisplay: none;\n\tfont-size: 42px;\n\tbox-sizing: border-box;\n\tpadding: 0 0 8px 0;\n}\n/* Show on mobile */\n@media (max-width: 767px) {\n\t.top-bar-mobile-menu-button{\n\t\tdisplay: flex;\n   }\n}\n/* Branding - USGS logo and name */\n.top-bar-branding{\n\tflex-grow: 3;\n\tdisplay: flex;\n}\n.top-bar-logo{\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n}\n.top-bar-logo img{\n\theight: 50px;\n\twidth: auto;\n}\n/* Shrink on mobile */\n@media (max-width: 767px) {\n\t.top-bar-logo img{\n\t\theight: 40px;\n   }\n}\n.top-bar-app-name{\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\tfont-size: 18px;\n\tfont-weight: 500;\n\tpadding: 0 0 2px 25px;\n\tbox-sizing: border-box;\n\tcolor: white;\n\tline-height: 20px;\n}\n/* Shrink on mobile */\n@media (max-width: 767px) {\n\t.top-bar-app-name{\n\t\tfont-size: 16px;\n\t\tline-height: 18px;\n\t\tpadding: 0 0 0 15px;\n   }\n}\n.top-bar-right{\n\tdisplay: flex;\n\tjustify-content: flex-end;\n}\n.top-bar-right button{\n\tborder: none;\n\tbackground-color: white;\n\tcolor: #022C55;\n\tborder-radius: 3px;\n\tbox-sizing: border-box;\n\ttransition: 0.15s;\n\tfont-weight: 600;\n\tfont-size: 14px;\n\tpadding: 3px 12px;\n}\n.top-bar-right button:hover{\n\tbackground-color: rgba(255,255,255,0.9);\n\ttransition: 0.15s;\n}\n.top-bar-right-item{\n\tdisplay: flex;\n\tmargin-left: 15px;\n\tflex-direction: column;\n\tjustify-content: center;\n}\n/* ======================== \n=========================== \nSidebar and Map \n=========================== \n=========================== */\n.app-body{\n\tdisplay: flex;\n\tflex-grow: 3;\n}\n\n#NWSlegend {\n\tposition: absolute;\n    z-index: 1000;\n}\n\n#main-menu {\n\twidth: 400px;\n\t/* min-width: 400px; */\n\ttransition: left .15s ease-in-out;\n\tbackground-color: #FFFFFF;\n\tz-index:1001;\n}\n/* Sidebar footer - developed by... */\n#sidebarFooter{\n\tdisplay: block;\n\ttext-align: center;\n\tfont-size: 14px;\n\tbox-sizing: border-box;\n\tpadding: 15px 10px;\n\tcolor: rgba(0,0,0,0.5);\n}\n#mapDiv{\n\twidth: 100%;\n\tflex-grow: 3;\n\tborder-left: 1px solid rgba(0,0,0,0.2);\n}\n/* Sidebar mobile toggle */\n@media (max-width: 500px) {\n   /* Slide menu out from left */\n\t.isOpenMenu #main-menu {\n\t\tleft: 0;\n   }\n   /* Change menu icon */\n\t.isOpenMenu .mobile-icon-close {\n\t\tdisplay: block;\n   }\n\t.isOpenMenu .mobile-icon-open {\n\t\tdisplay: none;\n   }\n\t#main-menu {\n\t\tposition: absolute;\n\t\tleft: -100%;\n\t\twidth: 100%;\n\t\t/* max-width: 400px; */\n\t\theight: 100%;\n\t\theight: calc(100% - 58px);\n\t\tbox-shadow: 2px 0px 25px -4px rgba(30,30,60,0.15);\n   }\n}\n/* ======================== \n=========================== \nUSGS Bottom Footer \n=========================== \n=========================== */\n.usgs-footer {\n\tbackground: #10152C;\n\tbox-sizing: border-box;\n\tpadding: 5px 0;\n\twidth: 100%;\n\tcolor: rgba(255,255,255,.5);\n\tfont-size:12px \n}\n@media (max-width:767px) {\n\t.usgs-footer {\n\t\ttext-align: center;\n   }\n}\n\n/* Uncomment the @media block below to hide on mobile */\n/* @media (max-width:767px) {\n\t.usgs-footer {\n\t\tdisplay: none !important;\n   }\n}*/\n\n\n.usgs-footer .tmp-container {\n\tmargin-right: auto;\n\tmargin-left: auto;\n\tpadding-left: 15px;\n\tpadding-right: 15px \n}\n.usgs-footer .tmp-container .footer-doi a {\n\tpadding: 2px 5px;\n\tcolor: rgba(255,255,255,.8);\n\ttransition: .15s \n}\n.usgs-footer .tmp-container .footer-doi a:hover {\n\tcolor: #fff;\n\ttransition: .15s \n}\n.usgs-footer .tmp-container hr {\n\tmargin: 3px auto !important;\n\topacity: .2 \n}\n\n/* ======================== \n=========================== \nMain Menu \n=========================== \n=========================== */\n.js-typeahead {\n   /* border:0px !important;\n\t*/\n\tborder-radius: 0.25rem!important;\n}\n.typeahead__container {\n\twidth:100%;\n}\n.select2 {\n\twidth: 100%!important;\n\tmargin-bottom: 5px;\n}\n.select2-selection--multiple .select2-search__field{\n\twidth:100%!important;\n}\n#siteIDFilter {\n\tpadding-right:0px!important;\n}\n#optionsPanel button {\n\tmargin-bottom:5px;\n\twidth: 100%;\n}\n#optionsPanel .card {\n\tbackground-color: #ECEEF3;\n}\n.select2-selection__choice {\n\tfont-size:12px;\n}\n#legend .circle {\n\tborder-radius: 50%;\n\twidth: 12px;\n\theight: 12px;\n\tfloat: left;\n\tmargin-top: 8px;\n}\n#legend span {\n\tpadding-left:16px;\n\tfont-size: 12px;\n}\n#legend .card-text {\n\theight: 40px;\n}\n#layersPanel .card {\n\tbackground-color: #ECEEF3;\n}\n.menu-content{\n\theight:100% \n}\n.menu-content .scrollable-content{\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\theight: 100%;\n}\n#main-menu .main-menu-container {\n\tposition: relative;\n\toverflow-y: auto;\n\theight: 100%;\n}\n#main-menu .sidebar-panel {\n\tbackground-color: #ffffff;\n\tmargin: 0 auto;\n\tborder: none;\n\tborder-bottom: 1px solid rgba(0,0,0,0.15);\n}\n .card-header > svg {\n\tfloat: right;\n}\n/*.card-header:after {\n\tfont-family: \'Font Awesome 5 Free\';\n\tcontent: \'\\f068\';\n\tfont-weight: 900;\n\tdisplay:none;\n}\n.card-header.collapsed:after {\n\tfont-family: "Font Awesome 5 Free";\n\tcontent: "\\f067";\n\tfont-weight: 900;\n\tdisplay:none;\n} */\n#main-menu .sidebar-panel .card-title {\n\tfont-size: 12pt;\n\tfont-weight: 600;\n   /* text-align: right;\n\t*/\n}\n#main-menu .sidebar-panel .card-header {\n\tbox-sizing: border-box;\n\tdisplay: block;\n\twidth: 100%;\n\tpadding: 15px;\n\tcolor: rgba(0,0,0,0.8);\n\tbackground-color: #ECEEF3;\n\tborder-top: 1px solid rgba(0,0,0,0.15);\n}\n#main-menu .sidebar-panel .card-header:hover {\n\tcursor: pointer;\n\tbackground-color: rgba(255, 255, 255, 0.5);\n\tcolor: #000;\n}\n#main-menu .slick-btn {\n\tborder: none;\n\toutline: none;\n\tborder-radius: 0;\n\tfont-size: 9pt;\n\tbox-sizing: border-box;\n\tpadding: 5px;\n\tdisplay: block;\n\twidth: 100%;\n\ttext-align: left;\n\tcolor: #6F758E;\n\tmargin: 0 auto;\n\tborder-left: 4px solid transparent;\n}\n#main-menu .slick-btn img {\n\theight: 25px;\n\tvertical-align: middle;\n\tdisplay: inline-block;\n\tmargin: 0 15px 0 0;\n\tborder-radius: 0;\n\tborder: none;\n}\n#main-menu .slick-btn br {\n\tdisplay: none;\n}\n#main-menu .slick-btn:hover {\n\tborder-color: #333;\n\tbackground-color: rgba(236, 238, 243, 0.5);\n}\n#main-menu .slick-btn:focus {\n\tbackground-color: #ECEEF3;\n\tborder-color: #4574CC;\n}\n#main-menu .slick-btn-selection {\n\tbackground-color: rgba(117, 136, 184, 0.5);\n\tborder-color: #4574CC !important;\n}\n.footer-links {\n\tfont-weight: 300;\n\tletter-spacing: 1.5px;\n\tbox-sizing: border-box;\n\tpadding: 10px;\n\tdisplay: block;\n\ttext-align: center;\n\topacity: .5;\n\tpadding:3px;\n}\n.footer-links a {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tpadding: 0 4px;\n\tfont-size: 8pt;\n}\n.footer-icons {\n\tpadding: 10px;\n\tletter-spacing: 6px;\n\ttext-align: center;\n\topacity: .5;\n}\n/************* END MAIN MENU **************/',""]),e.exports=n},50:function(e,n,t){var o={"./en-au":10,"./en-au.js":10,"./en-ca":11,"./en-ca.js":11,"./en-gb":12,"./en-gb.js":12,"./en-ie":13,"./en-ie.js":13,"./en-il":14,"./en-il.js":14,"./en-in":15,"./en-in.js":15,"./en-nz":16,"./en-nz.js":16,"./en-sg":17,"./en-sg.js":17};function i(e){var n=a(e);return t(n)}function a(e){if(!t.o(o,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=a,e.exports=i,i.id=50}});