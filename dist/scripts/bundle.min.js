webpackJsonp([0],[function(e,a,r){(function(e,a,r,t,i){function o(){k.addLayer(L.imageOverlay("https://radar.weather.gov/ridge/Conus/RadarImg/northeast_radaronly.gif",[[35.13102,-81.613834],[49.508061,-66.517938]])),W.addLayer(L.imageOverlay("https://radar.weather.gov/ridge/RadarImg/N0Z/ENX_N0Z_0.gif",[[38.578726,-78.420367],[46.578726,-69.693094]])),W.addLayer(L.imageOverlay("https://radar.weather.gov/ridge/RadarImg/N0Z/BGM_N0Z_0.gif",[[38.193727,-80.341364],[46.193727,-71.614092]])),W.addLayer(L.imageOverlay("https://radar.weather.gov/ridge/RadarImg/N0Z/BUF_N0Z_0.gif\t",[[38.941729,-83.093363],[46.941729,-74.36609]])),W.addLayer(L.imageOverlay("https://radar.weather.gov/ridge/RadarImg/N0Z/TYX_N0Z_0.gif",[[39.748728,-80.036364],[47.748728,-71.309091]])),W.addLayer(L.imageOverlay("https://radar.weather.gov/ridge/RadarImg/N0Z/OKX_N0Z_0.gif",[[36.858728,-77.220362],[44.858728,-68.493089]])),A.addLayer(L.imageOverlay(" https://radar.weather.gov/ridge/RadarImg/N0R/ENX_N0R_0.gif",[[39.894591,-76.989871],[45.267637,-71.128366]])),A.addLayer(L.imageOverlay(" https://radar.weather.gov/ridge/RadarImg/N0R/BGM_N0R_0.gif",[[39.526025,-78.893004],[44.866266,-73.067287]])),A.addLayer(L.imageOverlay(" https://radar.weather.gov/ridge/RadarImg/N0R/BUF_N0R_0.gif",[[40.241795,-81.680043],[45.646381,-75.78413]])),A.addLayer(L.imageOverlay(" https://radar.weather.gov/ridge/RadarImg/N0R/TYX_N0R_0.gif",[[41.012603,-78.662387],[46.48944,-72.687656]])),A.addLayer(L.imageOverlay(" https://radar.weather.gov/ridge/RadarImg/N0R/OKX_N0R_0.gif",[[38.245599,-75.712675],[43.476892,-70.00581]])),U.addLayer(L.imageOverlay(" https://radar.weather.gov/ridge/RadarImg/NTP/ENX_NTP_0.gif",[[39.894178,-76.99032],[45.268049,-71.127915]])),U.addLayer(L.imageOverlay(" https://radar.weather.gov/ridge/RadarImg/NTP/BGM_NTP_0.gif",[[39.52562,-78.893445],[44.866669,-73.066846]])),U.addLayer(L.imageOverlay(" https://radar.weather.gov/ridge/RadarImg/NTP/BUF_NTP_0.gif",[[40.241382,-81.680491],[45.646793,-75.78368]])),U.addLayer(L.imageOverlay(" https://radar.weather.gov/ridge/RadarImg/NTP/TYX_NTP_0.gif",[[41.01219,-78.662836],[46.489851,-72.687205]])),U.addLayer(L.imageOverlay(" https://radar.weather.gov/ridge/RadarImg/NTP/OKX_NTP_0.gif",[[38.245202,-75.713107],[43.477288,-70.005377]]))}function n(e){if(console.log("OPENING POPUP...",e),a("#graphContainer").remove(),a(".graphLoader").remove(),T=void 0,a.ajaxQ.abortAll(),e.layer.bindPopup(e.layer.properties.popupContent,{minWidth:300}).openPopup(),"sw"===e.layer.properties.siteType||"gw"===e.layer.properties.siteType){var t="00060,00065,62614,62615,62619,72214,72264,72019",i="P7D";a.getJSON(USGSwaterServicesURL+e.layer.properties.siteID+"&parameterCd="+t+"&period="+i,function(t){if(!t.data||t.data[0].time_series_data.length<=0)return setTimeout(function(){a("#nwisGraphLoader").html("<p><i>No NWIS waterservices data was found</i></p>"),a("#ahpsGraphLoader").remove(),a("#nwmGraphLoader").remove()},500),void console.log("Found an NWIS site, but it had no data in waterservices: ",e.layer.properties.siteID);console.log("NWIS data:",t);var i,o,n,l=!1;if(a.each(t.data,function(e,a){a.parameter_name.indexOf("Discharge")!==-1?(l=!0,i="Discharge, cfs",o="Discharge: {point.y} cfs",n={tooltip:{pointFormat:o},showInLegend:!0,id:"usgs-series",data:a.time_series_data,name:"USGS Measured discharge"}):a.parameter_name.indexOf("Elevation")!==-1?(a.parameter_name+=", ft",a.loc_web_ds.length>0?a.parameter_name+=" ("+a.loc_web_ds+")":i=a.parameter_name,o=a.parameter_name+": {point.y}",n={tooltip:{pointFormat:o},showInLegend:!1,id:"usgs-series",data:a.time_series_data,name:a.parameter_name}):"Water level, depth LSD"===a.parameter_name?(i="Elevation, ft",o="Elevation: {point.y} ft",n={tooltip:{pointFormat:o},showInLegend:!1,id:"usgs-series",data:a.time_series_data,name:a.parameter_name}):a.parameter_name.indexOf("Gage height")===-1||l||(a.parameter_name+=", ft",a.loc_web_ds.length>0?a.parameter_name+=" ("+a.loc_web_ds+")":i=a.parameter_name,o=a.parameter_name+": {point.y}",n={tooltip:{pointFormat:o},showInLegend:!1,id:"usgs-series",data:a.time_series_data,name:a.parameter_name})}),!l)return T=void 0,console.log("This is a gw or non disharge site, so were done"),a(".graphLoader").remove(),void s(n,i);if(a("#nwisGraphLoader").remove(),s(n,i),F[e.layer.properties.siteID].properties.nws_id&&"n/a"!==F[e.layer.properties.siteID].properties.nws_id){console.log("Found AHPS site: ",F[e.layer.properties.siteID].properties.nws_id,"  Querying AHPS...");var c=AHPSurl+e.layer.properties.nws_id+"&output=xml";console.log("AHPS page url:",c);var p="./proxy.php?url=";location.hostname.match("wim")&&(p=NYproxyURL),a.ajax({url:p+c,dataType:"xml",success:function(r){console.log("AHPS Response:",r);var t=[],n=!1;if(a(r).find("forecast").find("datum").each(function(){var e=a(this).find("valid").text();if(!l&&"Stage"===a(this).find("primary").attr("name")){var r=a(this).find("primary").attr("units"),i=parseFloat(a(this).find("primary").text());n=!0}if(l&&"Flow"===a(this).find("secondary").attr("name")){var r=a(this).find("secondary").attr("units"),i=parseFloat(a(this).find("secondary").text());"kcfs"===r&&(i*=1e3),n=!0}if(n){var o=new Date(e)/1;t.push([o,i])}}),t.sort(),t.length<=1)return console.log("Found an AHPS Site, but no AHPS data was found: ",e.layer.properties.siteID,e.layer.properties.ahpsID),void a("#ahpsGraphLoader").remove();var c={tooltip:{pointFormat:o},showInLegend:!0,color:"#009933",name:"NWS River Forecast (AHPS)",id:"ahps-series",data:t};a("#ahpsGraphLoader").remove(),s(c,i)}})}else console.log("This is not an AHPS site:",e.layer.properties.siteID),a("#ahpsGraphLoader").remove();var d=r.query({url:NWMmapServiceURL}),g="site_no = '"+e.layer.properties.siteID+"'";a("#graphContainer").append("LOADING NWM DATA... Please Wait"),d.where(g),d.run(function(r,t,n){if(r)return void console.log(r);if(0==t.features.length)return void console.log("Did not find NWM site for USGS Site: ",e.layer.properties.siteID);console.log("NWM Feature query results:",t);var l=t.features[0].properties.feature_id;22743145==l&&(l=22743167),console.log("Found NWM reach code: ",l,"  Querying NWM...");var c=NWMshortRangeURL+l;console.log("NWM page url:",c);var p="./proxy.php?url=";location.hostname.match("wim")&&(p=NYproxyURL),a.ajax({url:p+c,dataType:"json",success:function(r){console.log("NWM Short Range Response:",r);var n=[];r[0].data.length>0&&(someValues=!0);r[0]["reference-time"],r[0].units;a.each(r[0].data,function(e,a){var r=a["forecast-time"],t=a.value,i=new Date(r)/1;n.push([i,t])}),n.sort();var c=n[n.length-1];console.log("Last short range NWM value:",c);var d=NWMmediumRangeURL+l;a.ajax({url:p+d,dataType:"json",success:function(r){console.log("NWM Medium Range Response:",r),r[0].data.length>0&&(someValues=!0);r[0]["reference-time"],r[0].units;a.each(r[0].data,function(e,a){var r=a["forecast-time"],t=a.value,i=new Date(r)/1;i>c[0]&&n.push([i,t])}),n.sort(),n.length<=1&&(console.log("Found a NWM Site, but no NWM data was found: ",e.layer.properties.siteID,e.layer.properties.nwm_reach_code),a("#nwmGraphLoader").remove(),reteurn);var l={tooltip:{pointFormat:o},showInLegend:!0,color:"#AF18EC",name:"NWM River Forecast for "+t.features[0].properties.site_name,id:"nwm-series",data:n};a("#nwmGraphLoader").remove(),s(l,i)}})}})})})}}function s(r,t){if(console.log("In showGraph",r,t,T),T&&T.series)return console.log("CHART EXISTS"),T.addSeries(r,!1),void T.redraw();console.log("SHOULD BE HERE");var i={chart:{type:"line",spacingTop:20,spacingLeft:0,spacingBottom:0,zoomType:"x"},title:{text:""},credits:{enabled:!1},xAxis:{type:"datetime",labels:{formatter:function(){return e.dateFormat("%m/%d",this.value)},align:"center",tickInterval:1728e5}},yAxis:{title:{text:t}},series:[r]};"Discharge"===r.name&&(i.yAxis.type="logarithmic"),"Water level, depth LSD"===r.name&&(i.yAxis.reversed=!0),setTimeout(function(){T=e.chart("graphContainer",i),a("#graphContainer").show(),console.log("END OF SHOWGRAPH",T)},500)}function l(e){C.clearLayers(),R.clearLayers(),G.eachLayer(function(r){var t=r.getLayers();a.each(t,function(a,r){r.feature.properties.Office===e&&I.fitBounds(r.getBounds())})}),a("#tripSelect").show(),a.each(H,function(r,t){t.WSC.OfficeName.indexOf(e)!==-1&&a.each(t.WSC.Trip,function(e,r){a("#tripSelect").append(a("<option></option>").attr("value",r.TripOwner).text(r.TripName))})})}function c(e){C.clearLayers(),R.clearLayers(),hullPoints=[],a.each(H,function(r,t){t.WSC.OfficeName.indexOf(e.tripCenter)!==-1&&a.each(t.WSC.Trip,function(r,t){t.TripName==e.tripName&&a.each(t.Sites,function(e,a){d("siteslayer",a)})})}),C.getLayers().length<=2?I.fitBounds(C.getBounds()):p(e)}function p(e){var a=t(C.toGeoJSON()),r=L.geoJSON(a).bindPopup("<b>Center: </b>"+e.tripCenter+"</br><b>Trip Name: </b>"+e.tripName+"</br><b>Trip Owner: </b>"+e.tripOwner,{minWidth:200});R.addLayer(r),I.fitBounds(R.getBounds())}function d(e,r){var t=L.icon({iconUrl:"./images/symbols/selected_site_yellow.png",iconSize:[64,64]});a.each(F,function(e,a){if(a.properties.siteID===r){var i=L.marker(a.getLatLng(),{icon:t,pane:"shadowPane"});C.addLayer(i)}})}function g(){a.getJSON(subDistGeoJSON,function(e){a.each(e.features,function(e,r){a("#centerSelect").append(a("<option></option>").attr("value",r.properties.Office).text(r.properties.Office))});var r={color:"#ff8c66",weight:0,opacity:.3},t=L.geoJSON(e,{style:r});G.addLayer(t)})}function m(){var e=L.icon({iconUrl:"./images/symbols/dot_small.png",iconSize:[8,8]});a.getJSON(siteListJSON,function(r){a.each(r.SitesCollection,function(a,r){F[r.SiteID]=L.marker([r.Attributes.latDD,r.Attributes.lonDD],{icon:e}),F[r.SiteID].properties={},F[r.SiteID].properties.siteID=r.SiteID,F[r.SiteID].properties.siteName=r.Attributes.station_nm,F[r.SiteID].properties.siteType=r.Attributes.site_type,F[r.SiteID].properties.nws_id=r.Attributes.nws_id,F[r.SiteID].properties.popupContent="<b>"+r.SiteID+"</b></br></br>"+r.Attributes.station_nm+'</br><a href="https://waterdata.usgs.gov/nwis/inventory/?site_no='+r.SiteID+'" target="_blank">Access Data</a></br><div id="graphContainer" style="width:100%; height:200px;display:none;"></div><div class="container" style="width:100%;"><div class="row"><div class="col-md-4 graphLoader" id="nwisGraphLoader"><p><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw graph-loader"></i>Loading NWIS...</p></div><div class="col-md-4 graphLoader" id="ahpsGraphLoader"><p><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw graph-loader"></i>Loading AHPS...</p></div><div class="col-md-4 graphLoader" id="nwmGraphLoader"><p><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw graph-loader"></i>Loading NWM..</p></div></div></div>',F[r.SiteID].properties.defaultPopupContent=F[r.SiteID].properties.popupContent,x.addLayer(F[r.SiteID])}),f(),h(go2warningsJSON)})}function f(){a.getJSON(tripListJSON,function(e){H=e.TripsCollection,a.each(H,function(e,r){a.each(r,function(e,r){a.each(r.Trip,function(e,t){a.each(t.Sites,function(e,a){F[a]&&(F[a].properties.tripName=t.TripName,F[a].properties.tripOwner=t.TripOwner,F[a].properties.popupContent="<b>"+a+"</b></br></br>"+F[a].properties.siteName+'</br><a href="https://waterdata.usgs.gov/nwis/inventory/?site_no='+a+'" target="_blank">Access Data</a></br></br><b>Office: </b>'+r.OfficeName+"</br><b>Trip Name: </b>"+F[a].properties.tripName+"</br><b>Trip Owner: </b>"+F[a].properties.tripOwner+'<div id="graphContainer" style="width:100%; height:200px;display:none;"></div><div class="container" style="width:100%;"><div class="row"><div class="col-md-4 graphLoader" id="nwisGraphLoader"><p><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw graph-loader"></i>Loading NWIS...</p></div><div class="col-md-4 graphLoader" id="ahpsGraphLoader"><p><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw graph-loader"></i>Loading AHPS...</p></div><div class="col-md-4 graphLoader" id="nwmGraphLoader"><p><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw graph-loader"></i>Loading NWM..</p></div></div></div>',F[a].properties.defaultPopupContent=F[a].properties.popupContent)})})})})})}function u(e){return console.log("in select go2:",e),"Go2"===e?(h(go2warningsJSON),"Show Go2"):"Go2Lite"===e?(h(go2liteWarningsJSON),"Show Go2Lite"):"Go2Fast"===e?(h(go2predictedWarningsJSON),"Show Go2Fast"):"Go2FastR"===e?(h(go2predictedWarningsJSON_NWM),"Show Go2FastR"):void 0}function h(e){C.clearLayers(),R.clearLayers(),a.getJSON(e,function(e){a("#loading").hide(),a("#time").html("Data queried: "+e.metadata.created),a.each(F,function(e,a){a.properties.popupContent=a.properties.defaultPopupContent;var r=L.icon({iconUrl:"./images/symbols/dot_small.png",iconSize:[8,8]});a.setIcon(r)}),a.each(e.SitesCollection,function(e,a){if("undefined"==typeof F[a.items.SiteID])console.warn("This site does not exist in TripList.json: ",a.items.SiteID);else{masterSite=F[a.items.SiteID];var r=masterSite.properties.siteType,t="",i=[];for(var o in a.items.goflags){t=t+'<div class="alert alert-warning"><b>'+a.items.goflags[o].go2flag+":</b> "+a.items.goflags[o].go2msg+"</div>";var n=a.items.goflags[o].go2flag;"iGH"==a.items.goflags[o].go2flag&&a.items.goflags[o].go2msg.indexOf("meas")!=-1&&(n="iGH_meas"),i.push(n)}if(_("1DCP",i)!=-1||_("2DCP",i)!=-1||_("1GH",i)!=-1||_("2GH",i)!=-1||_("MODEM",i)!=-1)i.length>1?fgIcon=L.icon({iconUrl:"images/symbols/multi_"+r+"_red.png",iconSize:[42,40]}):fgIcon=L.icon({iconUrl:"images/symbols/"+r+"_red.png",iconSize:[22,30]});else if(_("1LRAT",i)!=-1||_("1HRAT",i)!=-1)i.length>1?fgIcon=L.icon({iconUrl:"images/symbols/multi_"+r+"_orange.png",iconSize:[42,40]}):fgIcon=L.icon({iconUrl:"images/symbols/"+r+"_orange.png",iconSize:[22,30]});else if(_("2LRAT",i)!=-1||_("2HRAT",i)!=-1||_("2RRAT",i)!=-1)i.length>1?fgIcon=L.icon({iconUrl:"images/symbols/multi_"+r+"_yellow.png",iconSize:[42,40]}):fgIcon=L.icon({iconUrl:"images/symbols/"+r+"_yellow.png",iconSize:[22,30]});else if(_("3LRAT",i)!=-1||_("3HRAT",i)!=-1)i.length>1?fgIcon=L.icon({iconUrl:"images/symbols/multi_"+r+"_green.png",iconSize:[42,40]}):fgIcon=L.icon({iconUrl:"images/symbols/"+r+"_green.png",iconSize:[22,30]});else if(_("4RAT",i)!=-1)i.length>1?fgIcon=L.icon({iconUrl:"images/symbols/multi_"+r+"_blue.png",iconSize:[42,40]}):fgIcon=L.icon({iconUrl:"images/symbols/"+r+"_blue.png",iconSize:[22,30]});else if(_("iGEN",i)!=-1||_("iGH_meas",i)!=-1)i.length>1?fgIcon=L.icon({iconUrl:"images/symbols/multi_"+r+"_violet.png",iconSize:[42,40]}):fgIcon=L.icon({iconUrl:"images/symbols/"+r+"_violet.png",iconSize:[22,30]});else if(_("TIME",i)!=-1)i.length>1?fgIcon=L.icon({iconUrl:"images/symbols/multi_"+r+"_black.png",iconSize:[42,40]}):fgIcon=L.icon({iconUrl:"images/symbols/"+r+"_black.png",iconSize:[22,30]});else if(_("iWEB",i)!=-1)i.length>1?fgIcon=L.icon({iconUrl:"images/symbols/multi_"+r+"_brown.png",iconSize:[42,40]}):fgIcon=L.icon({iconUrl:"images/symbols/"+r+"_brown.png",iconSize:[22,30]});else if(_("iDCP",i)!=-1||_("iGH",i)!=-1||_("SPIKE",i)!=-1||_("3DCP",i)!=-1||_("4DCP",i)!=-1||_("3GH",i)!=-1||_("4GH",i)!=-1)i.length>1?fgIcon=L.icon({iconUrl:"images/symbols/multi_"+r+"_pink.png",iconSize:[42,40]}):fgIcon=L.icon({iconUrl:"images/symbols/"+r+"_pink.png",iconSize:[22,30]});else{if(_("GAP",i)==-1&&_("SHFT",i)==-1&&_("COMP",i)==-1)return;i.length>1?fgIcon=L.icon({iconUrl:"images/symbols/multi_"+r+"_gray.png",iconSize:[42,40]}):fgIcon=L.icon({iconUrl:"images/symbols/"+r+"_gray.png",iconSize:[22,30]})}masterSite.properties.popupContent+="</br>"+t,masterSite.setIcon(fgIcon)}})})}function y(){a("#togglePeople").toggleClass("btn-default btn-primary"),z=!z,z?(v(),M=setInterval(v,3e4)):(I.removeLayer(P),clearInterval(M))}function v(){I.hasLayer(P)||I.addLayer(P),a.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:trackerURL,data:trackerData,async:!1,dataType:"jsonp",success:function(e){e.Data&&e.Data.length>0?(P.clearLayers(),a(e.Data).each(function(e,a){var r=[parseFloat(a.Latitude),parseFloat(a.Longitude)],t=a.Date,o=a.Accuracy,n=a["Speed(mph)"],s=a["Altitude(m)"],l=a.DeviceName,c=l.split("-")[1],p=a.DeviceID,d=i(t),g=d.format("MMMM Do YYYY, h:mm:ss a"),m=d.valueOf()/1e3,f=(new Date).getTime()/1e3,u=L.icon({iconUrl:"./images/person_icons/"+c+".png",iconSize:[40,40]}),h=L.marker(r,{icon:u}).bindPopup("<b>User Data</b></br><b>Timestamp:</b> "+g+"</br><b>Color:</b> "+c+"</br><b>Speed(mph):</b> "+n+"</br><b>Altitude(m):</b> "+s+"</br><b>Accuracy(m):</b> "+o);f-m<129600?(P.addLayer(h),console.log("deviceID: ",p," | color: ",c," | date: ",g," | location: ",r," | speed: ",n," mph | altitude: ",s," meters | accuracy: ",o," meters")):console.log(c,"was skipped for no update.")})):console.log("Error retreiving user locations")},error:function(e,a,r){alert("Unexpected error has occurred: "+e.statusText+" ("+e.status+")")}})}function _(e,a){for(var r=0;r<a.length;r++)if(a[r].match(new RegExp(e,"i")))return r;return-1}function S(e){switch(e){case"Streets":e="Streets";break;case"Satellite":e="Imagery";break;case"Topo":e="Topographic";break;case"Terrain":e="Terrain";break;case"Gray":e="Gray";break;case"NatGeo":e="NationalGeographic"}O&&I.removeLayer(O),O=r.basemapLayer(e),I.addLayer(O),D&&I.removeLayer(D),"Gray"!==e&&"Imagery"!==e&&"Terrain"!==e||(D=r.basemapLayer(e+"Labels"),I.addLayer(D))}function b(e){a("#NWSlegend").empty(),a("#radarTimeStamp").empty(),N(),"sr_NWS_layer"==e&&(I.addLayer(A),a("#NWSlegend").append("<img id='LegendImg' src='https://radar.weather.gov/ridge/kml/radarkeyimages/ENX_N0R_Legend_0.gif'/>")),"lr_NWS_layer"==e&&(I.addLayer(W),a("#NWSlegend").append("<img id='LegendImg' src='https://radar.weather.gov/ridge/kml/radarkeyimages/ENX_N0Z_Legend_0.gif'/>")),"storm_NWS_layer"==e&&(I.addLayer(U),a("#NWSlegend").append("<img id='LegendImg' src='https://radar.weather.gov/ridge/kml/radarkeyimages/ENX_NTP_Legend_0.gif'/>")),"reflectivity_NWS_conus_layer"==e&&(I.addLayer(k),a("#NWSlegend").append("<img id='LegendImg' src='https://radar.weather.gov/ridge/kml/radarkeyimages/ENX_NCR_Legend_0.gif'/>"))}function N(){a("#NWSlegend").empty(),a("#radarTimeStamp").empty(),I.removeLayer(A),I.removeLayer(W),I.removeLayer(U),I.removeLayer(k)}function w(){a("#centerSelect").val(a("#centerSelect option:first-child").val()),a("#tripSelect").find("option:gt(0)").remove(),a("#togglePeople").hasClass("btn-primary")&&y(),a("#go2typeSelect").val("full"),u("Go2"),C.clearLayers(),R.clearLayers(),N(),a(".radarBtn").removeClass("active"),I.setView([MapY,MapX],7)}var I,T,D,O,G,R,C,x,P,W,A,U,k,M,F={},H={},z=!1;e.setOptions({global:{useUTC:!1},lang:{thousandsSep:","}}),a(document).ready(function(){console.log("Application Information: production version 1.1.0"),a("#appVersion").html("Application Information: production version 1.1.0"),a.ajaxQ=function(){var e=0,r={};return a(document).ajaxSend(function(a,t){t._id=++e,r[t._id]=t}),a(document).ajaxComplete(function(e,a){delete r[a._id]}),{abortAll:function(){var e=[];return a.each(r,function(a,r){e.push(r._id),r.abort()}),e}}}(),I=L.map("mapDiv",{zoomControl:!1}),L.control.zoom({position:"topright"}).addTo(I),L.control.scale().addTo(I),O=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",maxZoom:16}).addTo(I),I.setView([MapY,MapX],MapZoom),G=L.featureGroup().addTo(I),R=L.featureGroup().addTo(I),C=L.featureGroup().addTo(I),x=L.featureGroup().addTo(I),P=L.featureGroup().addTo(I),W=L.layerGroup(),A=L.layerGroup(),U=L.layerGroup(),k=L.layerGroup(),m(),g(),o(),a("#centerSelect").on("change",function(){var e=a("#centerSelect :selected").text();a('#tripSelect option[value!="default"]').remove(),l(e)}),a("#tripSelect").on("change",function(){var e={tripName:a("#tripSelect :selected").text(),tripOwner:a("#tripSelect :selected").attr("value"),tripCenter:a("#centerSelect :selected").text()};c(e)}),a("#go2typeSelect").on("change",function(){var e=a("#go2typeSelect :selected").text();u(e)}),a(".basemapBtn").click(function(){a(".basemapBtn").removeClass("slick-btn-selection"),a(this).addClass("slick-btn-selection");var e=this.id.replace("btn","");S(e)}),a("#mobile-main-menu").click(function(){a("body").toggleClass("isOpenMenu")}),a("#togglePeople").click(function(){y()}),a(".radarBtn").click(function(){if(a(this).hasClass("slick-btn-selection"))a(this).removeClass("slick-btn-selection"),N();else{a(".radarBtn").removeClass("slick-btn-selection"),a(this).addClass("slick-btn-selection");var e=a(this).val();b(e)}}),a("#resetView").click(function(){w()}),a("#aboutButton").click(function(){a("#aboutModal").modal("show")}),x.on("click",function(e){n(e)}),I.on("popupopen",function(e){var a=I.project(e.target._popup._latlng);a.y-=e.target._popup._container.clientHeight/2,I.panTo(I.unproject(a),{animate:!0})})})}).call(a,r(1),r(2),r(3),r(5),r(24))}]);