!function(e){function n(n){for(var t,a,s=n[0],l=n[1],p=n[2],d=0,g=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&g.push(o[a][0]),o[a]=0;for(t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t]);for(c&&c(n);g.length;)g.shift()();return i.push.apply(i,p||[]),r()}function r(){for(var e,n=0;n<i.length;n++){for(var r=i[n],t=!0,s=1;s<r.length;s++){var l=r[s];0!==o[l]&&(t=!1)}t&&(i.splice(n--,1),e=a(a.s=r[0]))}return e}var t={},o={0:0},i=[];function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,n,r){a.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,n){if(1&n&&(e=a(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)a.d(r,t,function(n){return e[n]}.bind(null,t));return r},a.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(n,"a",n),n},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=n,s=s.slice();for(var p=0;p<s.length;p++)n(s[p]);var c=l;i.push([20,1]),r()}({20:function(e,n,r){"use strict";r.r(n),function(e){r(21),r(23),r(29);var n,t,o,i,a,s,l,p,c,d,g,m,u,f,h,b=r(19),y=r.n(b),v=(r(47),r(4)),x=r.n(v),S=(r(0),r(1)),w=r.n(S),_=r(2),N=(r(51),r(55),{}),O={},T=!1,D=spotURLinternal;function I(n,r){if(console.log("In showGraph",n,r,t),t&&t.series)return console.log("CHART EXISTS"),t.addSeries(n,!1),void t.redraw();console.log("SHOULD BE HERE");var o={chart:{type:"line",spacingTop:20,spacingLeft:0,spacingBottom:0,zoomType:"x"},title:{text:""},credits:{enabled:!1},xAxis:{type:"datetime",labels:{formatter:function(){return x.a.dateFormat("%m/%d",this.value)},align:"center",tickInterval:1728e5}},yAxis:{title:{text:r}},series:[n]};"Discharge"===n.name&&(o.yAxis.type="logarithmic"),"Water level, depth LSD"===n.name&&(o.yAxis.reversed=!0),setTimeout((function(){t=x.a.chart("graphContainer",o),e("#graphContainer").show(),console.log("END OF SHOWGRAPH",t)}),500)}function k(e){var r=y()(s.toGeoJSON());console.log("sites selection geojson:",JSON.stringify(s.toGeoJSON()));var t=L.geoJSON(r).bindPopup(e,{minWidth:200});a.addLayer(t),n.flyToBounds(a.getBounds())}function C(n){var r=L.icon({iconUrl:"./images/symbols/selected_site_yellow.png",iconSize:[64,64]});e.each(N,(function(e,t){if(t.properties.siteID===n){var o=L.marker(t.getLatLng(),{icon:r,pane:"shadowPane"});s.addLayer(o)}}))}function G(e){return console.log("in select go2:",e),"Go2"===e?(z(go2warningsJSON),"Show Go2"):"Go2Lite"===e?(z(go2liteWarningsJSON),"Show Go2Lite"):"Go2Fast"===e?(z(go2predictedWarningsJSON),"Show Go2Fast"):"Go2FastR"===e?(z(go2predictedWarningsJSON_NWM),"Show Go2FastR"):void 0}function z(n){var r;s.clearLayers(),a.clearLayers(),e.getJSON(n,(function(n){e("#loading").hide(),e("#time").html("Data queried: "+n.metadata.created),e.each(N,(function(e,n){n.properties.popupContent=n.properties.defaultPopupContent,r=L.icon({iconUrl:"./images/symbols/dot_small.png",iconSize:[8,8]}),n.setIcon(r)})),e.each(n.SitesCollection,(function(e,n){if(void 0===N[n.items.SiteID])console.warn("This site does not exist in TripList.json: ",n.items.SiteID);else{var t=N[n.items.SiteID],o=t.properties.siteType,i="",a=[];for(var s in n.items.goflags){i=i+'<div class="alert alert-warning"><b>'+n.items.goflags[s].go2flag+":</b> "+n.items.goflags[s].go2msg+"</div>";var l=n.items.goflags[s].go2flag;"iGH"==n.items.goflags[s].go2flag&&-1!=n.items.goflags[s].go2msg.indexOf("meas")&&(l="iGH_meas"),a.push(l)}if(-1!=U("1DCP",a)||-1!=U("2DCP",a)||-1!=U("1GH",a)||-1!=U("2GH",a)||-1!=U("MODEM",a))r=a.length>1?L.icon({iconUrl:"images/symbols/multi_"+o+"_red.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+o+"_red.png",iconSize:[22,30]});else if(-1!=U("1LRAT",a)||-1!=U("1HRAT",a))r=a.length>1?L.icon({iconUrl:"images/symbols/multi_"+o+"_orange.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+o+"_orange.png",iconSize:[22,30]});else if(-1!=U("2LRAT",a)||-1!=U("2HRAT",a)||-1!=U("2RRAT",a))r=a.length>1?L.icon({iconUrl:"images/symbols/multi_"+o+"_yellow.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+o+"_yellow.png",iconSize:[22,30]});else if(-1!=U("3LRAT",a)||-1!=U("3HRAT",a))r=a.length>1?L.icon({iconUrl:"images/symbols/multi_"+o+"_green.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+o+"_green.png",iconSize:[22,30]});else if(-1!=U("4RAT",a))r=a.length>1?L.icon({iconUrl:"images/symbols/multi_"+o+"_blue.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+o+"_blue.png",iconSize:[22,30]});else if(-1!=U("iGEN",a)||-1!=U("iGH_meas",a))r=a.length>1?L.icon({iconUrl:"images/symbols/multi_"+o+"_violet.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+o+"_violet.png",iconSize:[22,30]});else if(-1!=U("TIME",a))r=a.length>1?L.icon({iconUrl:"images/symbols/multi_"+o+"_black.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+o+"_black.png",iconSize:[22,30]});else if(-1!=U("iWEB",a))r=a.length>1?L.icon({iconUrl:"images/symbols/multi_"+o+"_brown.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+o+"_brown.png",iconSize:[22,30]});else if(-1!=U("iDCP",a)||-1!=U("iGH",a)||-1!=U("SPIKE",a)||-1!=U("3DCP",a)||-1!=U("4DCP",a)||-1!=U("3GH",a)||-1!=U("4GH",a))r=a.length>1?L.icon({iconUrl:"images/symbols/multi_"+o+"_pink.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+o+"_pink.png",iconSize:[22,30]});else{if(-1==U("GAP",a)&&-1==U("SHFT",a)&&-1==U("COMP",a))return;r=a.length>1?L.icon({iconUrl:"images/symbols/multi_"+o+"_gray.png",iconSize:[42,40]}):L.icon({iconUrl:"images/symbols/"+o+"_gray.png",iconSize:[22,30]})}t.properties.popupContent+="</br>"+i,t.setIcon(r)}}))}))}function A(){e("#togglePeople").toggleClass("btn-secondary btn-primary"),(T=!T)?(M(),h=setInterval(M,15e4)):(n.removeLayer(p),clearInterval(h))}function M(){n.hasLayer(p)||n.addLayer(p),console.log("ABOUT TO LOAD PEOPLE WITH THIS URL:",D),e.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:D,dataType:"json",success:function(n){!function(n){console.log("Got locations:",n),n.length>0?(p.clearLayers(),e(n).each((function(e,n){var r,t=[parseFloat(n.latitude),parseFloat(n.longitude)],o=n.messengerName,i=o.split("_"),a=!1;3===i.length&&(a=!0,o=i[0]+"_"+i[1],r=i[2]);var s=w()(n.dateTime),l=s.format("MMMM Do YYYY, h:mm:ss a"),c=s.valueOf()/1e3,d=(new Date).getTime()/1e3,g=iconLookup[o];g||console.warn("No icon for: "+o);var m=L.icon({iconUrl:"./images/person_icons/"+g+".png",iconSize:[40,40]}),u="User Data</br>";a&&(u=r+"</br>"),u+="<b>ESN:</b> "+n.messengerId+"</br><b>Timestamp:</b> "+l+"</br><b>GroupID:</b> "+o+"</br><b>Type:</b> "+n.messageType+"</br><b>Message:</b> "+n.messageContent+"</br><b>Battery:</b> "+n.batteryState;var f=L.marker(t,{zIndexOffset:1e3,icon:m}).bindPopup(u);d-c<129600?(p.addLayer(f),console.log("Adding:",n.messengerId)):console.log("Skipped for no update:",n.messengerId)}))):console.log("Error retreiving user locations")}(n)},error:function(e,n,r){console.error("Unexpected error has occurred: "+e.statusText+" ("+e.status+")"),D=spotURLexternal,M()}})}function U(e,n){for(var r=0;r<n.length;r++)if(n[r].match(new RegExp(e,"i")))return r;return-1}function j(){e("#NWSlegend").empty(),e("#radar-legend").hide(),e("#past-rainfall-legend").hide(),e("#forecast-rainfall-legend").hide(),n.removeLayer(f),n.removeLayer(u),n.removeLayer(c),n.removeLayer(d),n.removeLayer(g),n.removeLayer(m)}x.a.setOptions({global:{useUTC:!1},lang:{thousandsSep:","}}),e(document).ready((function(){var r,h,b;console.log("Application Information: production version 1.3.0"),e("#appVersion").html("Application Information: production version 1.3.0"),e.ajaxQ=(r=0,h={},e(document).ajaxSend((function(e,n){n._id=++r,h[n._id]=n})),e(document).ajaxComplete((function(e,n){delete h[n._id]})),{abortAll:function(){var n=[];return e.each(h,(function(e,r){n.push(r._id),r.abort()})),n}}),n=L.map("mapDiv",{zoomControl:!1}),L.control.zoom({position:"topright"}).addTo(n),L.control.scale().addTo(n),i=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",maxZoom:16}).addTo(n),n.setView([MapY,MapX],MapZoom),a=L.featureGroup().addTo(n),s=L.featureGroup().addTo(n),l=L.featureGroup().addTo(n),p=L.featureGroup().addTo(n),u=L.layerGroup(),f=L.layerGroup(),c=L.layerGroup(),d=L.layerGroup(),g=L.layerGroup(),m=L.layerGroup(),b=L.icon({iconUrl:"./images/symbols/dot_small.png",iconSize:[8,8]}),e.getJSON(siteListJSON,(function(n){e.each(n.SitesCollection,(function(n,r){N[r.SiteID]=L.marker([r.Attributes.latDD,r.Attributes.lonDD],{icon:b}),N[r.SiteID].properties={},N[r.SiteID].properties.siteID=r.SiteID,N[r.SiteID].properties.siteName=r.Attributes.station_nm,N[r.SiteID].properties.siteType=r.Attributes.site_type,N[r.SiteID].properties.nws_id=r.Attributes.nws_id,N[r.SiteID].properties.office=r.Attributes.Office,N[r.SiteID].properties.popupContent="<b>"+r.SiteID+"</b></br></br>"+r.Attributes.station_nm+'</br><a href="https://waterdata.usgs.gov/nwis/inventory/?site_no='+r.SiteID+'" target="_blank">Access Data</a></br><div id="graphContainer" style="width:100%; height:200px;display:none;"></div><div class="container" style="width:100%;"><div class="row"><div class="col-md-4 graphLoader" id="nwisGraphLoader"><p><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw graph-loader"></i>Loading NWIS...</p></div><div class="col-md-4 graphLoader" id="ahpsGraphLoader"><p><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw graph-loader"></i>Loading AHPS...</p></div><div class="col-md-4 graphLoader" id="nwmGraphLoader"><p><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw graph-loader"></i>Loading NWM..</p></div></div></div>',N[r.SiteID].properties.defaultPopupContent=N[r.SiteID].properties.popupContent,l.addLayer(N[r.SiteID]),0==e("#centerSelect option:contains('"+r.Attributes.Office+"')").length&&e("#centerSelect").append(e("<option></option>").attr("value",r.Attributes.Office).text(r.Attributes.Office))})),e.getJSON(tripListJSON,(function(n){O=n.TripsCollection,e.each(O,(function(n,r){e.each(r,(function(n,r){e.each(r.Trip,(function(n,t){e.each(t.Sites,(function(e,n){N[n]&&(N[n].properties.tripName=t.TripName,N[n].properties.tripOwner=t.TripOwner,N[n].properties.popupContent="<b>"+n+"</b></br></br>"+N[n].properties.siteName+'</br><a href="https://waterdata.usgs.gov/nwis/inventory/?site_no='+n+'" target="_blank">Access Data</a></br></br><b>Office: </b>'+r.OfficeName+"</br><b>Trip Name: </b>"+N[n].properties.tripName+"</br><b>Trip Owner: </b>"+N[n].properties.tripOwner+'<div id="graphContainer" style="width:100%; height:200px;display:none;"></div><div class="container" style="width:100%;"><div class="row"><div class="col-md-4 graphLoader" id="nwisGraphLoader"><p><i class="fa fa-cog fa-spin fa-3x fa-fw graph-loader"></i>Loading NWIS...</p></div><div class="col-md-4 graphLoader" id="ahpsGraphLoader"><p><i class="fa fa-cog fa-spin fa-3x fa-fw graph-loader"></i>Loading AHPS...</p></div><div class="col-md-4 graphLoader" id="nwmGraphLoader"><p><i class="fa fa-cog fa-spin fa-3x fa-fw graph-loader"></i>Loading NWM..</p></div></div></div>',N[n].properties.defaultPopupContent=N[n].properties.popupContent)}))}))}))}))})),z(go2warningsJSON)})),f.addLayer(L.tileLayer("https://{s}.agron.iastate.edu/cache/tile.py/1.0.0/nexrad-n0q-900913/{z}/{x}/{y}.png",{subdomains:["mesonet","mesonet1","mesonet2","mesonet3"],opacity:.7})),u.addLayer(Object(_.b)({url:"https://idpgis.ncep.noaa.gov/arcgis/rest/services/NWS_Observations/radar_base_reflectivity/MapServer",opacity:.7,f:"image"})),c.addLayer(L.tileLayer("https://{s}.agron.iastate.edu/cache/tile.py/1.0.0/q2-n1p-900913/{z}/{x}/{y}.png",{subdomains:["mesonet","mesonet1","mesonet2","mesonet3"],opacity:.7})),d.addLayer(L.tileLayer("https://{s}.agron.iastate.edu/cache/tile.py/1.0.0/q2-p24h-900913/{z}/{x}/{y}.png",{subdomains:["mesonet","mesonet1","mesonet2","mesonet3"],opacity:.7})),g.addLayer(Object(_.b)({url:"https://idpgis.ncep.noaa.gov/arcgis/rest/services/NWS_Forecasts_Guidance_Warnings/wpc_qpf/MapServer",opacity:.7,f:"image",layers:[7]})),m.addLayer(Object(_.b)({url:"https://idpgis.ncep.noaa.gov/arcgis/rest/services/NWS_Forecasts_Guidance_Warnings/wpc_qpf/MapServer",opacity:.7,f:"image",layers:[1]})),e(".collapse.show").each((function(){e(this).prev(".card-header").find("svg").addClass("fa-minus").removeClass("fa-plus")})),e(".collapse").on("show.bs.collapse",(function(){e(this).prev(".card-header").find("svg").removeClass("fa-plus").addClass("fa-minus")})).on("hide.bs.collapse",(function(){e(this).prev(".card-header").find("svg").removeClass("fa-minus").addClass("fa-plus")})),e("#centerSelect").on("change",(function(){var r=e("#centerSelect :selected").text();e('#tripSelect option[value!="default"]').remove(),function(r){s.clearLayers(),a.clearLayers(),l.eachLayer((function(e){e.properties.office===r&&C(e.properties.siteID)})),s.getLayers().length<=2?n.flyToBounds(s.getBounds()):k(r);e("#tripSelect").show(),e.each(O,(function(n,t){-1!==t.WSC.OfficeName.indexOf(r)&&e.each(t.WSC.Trip,(function(n,r){e("#tripSelect").append(e("<option></option>").attr("value",r.TripOwner).text(r.TripName))}))}))}(r)})),e("#tripSelect").on("change",(function(){!function(r){s.clearLayers(),a.clearLayers(),e.each(O,(function(n,t){-1!==t.WSC.OfficeName.indexOf(r.tripCenter)&&e.each(t.WSC.Trip,(function(n,t){t.TripName==r.tripName&&e.each(t.Sites,(function(e,n){C(n)}))}))})),s.getLayers().length<=2?n.flyToBounds(s.getBounds()):k(r.tripName)}({tripName:e("#tripSelect :selected").text(),tripOwner:e("#tripSelect :selected").attr("value"),tripCenter:e("#centerSelect :selected").text()})})),e("#go2typeSelect").on("change",(function(){G(e("#go2typeSelect :selected").text())})),e(".basemapBtn").click((function(){e(".basemapBtn").removeClass("slick-btn-selection"),e(this).addClass("slick-btn-selection"),function(e){switch(e){case"Streets":e="Streets";break;case"Satellite":e="Imagery";break;case"Topo":e="Topographic";break;case"Terrain":e="Terrain";break;case"Gray":e="Gray";break;case"NatGeo":e="NationalGeographic";break;case"Verizon":e="Verizon"}i&&n.removeLayer(i);if("Verizon"===e){i=L.imageOverlay("./images/verizon_coverage.jpg",[[40.464082713022,-80.23879543723],[45.162293719815,-71.69092847148]]).addTo(n),n.addLayer(i)}else i=Object(_.a)(e),n.addLayer(i),o&&n.removeLayer(o),"Gray"!==e&&"Imagery"!==e&&"Terrain"!==e||(o=Object(_.a)(e+"Labels"),n.addLayer(o))}(this.id.replace("btn",""))})),e("#mobile-main-menu").click((function(){e("body").toggleClass("isOpenMenu")})),e("#togglePeople").click((function(){A()})),e(".radarBtn").click((function(){(console.log("radarBtn click",e(this).val()),e(this).hasClass("slick-btn-selection"))?(e(this).removeClass("slick-btn-selection"),j()):(e(".radarBtn").removeClass("slick-btn-selection"),e(this).addClass("slick-btn-selection"),function(r){console.log("toggle radar:",r),j(),"reflectivity_NWS_conus_layer"==r&&(n.addLayer(f),e("#radar-legend").show());"NWS_radar_base_reflectivity"==r&&(n.addLayer(u),e("#radar-legend").show());"Q2_1_hour_precipitation"==r&&(n.addLayer(c),e("#past-rainfall-legend").show());"Q2_24_hour_precipitation"==r&&(n.addLayer(d),e("#past-rainfall-legend").show());"Rainfall_forecast_6_hour"==r&&(n.addLayer(g),e("#forecast-rainfall-legend").show());"Rainfall_forecast_24_hour"==r&&(n.addLayer(m),e("#forecast-rainfall-legend").show())}(e(this).val()))})),e("#resetView").click((function(){!function(){e("#centerSelect").val(e("#centerSelect option:first-child").val()),e("#tripSelect").find("option:gt(0)").remove(),e("#togglePeople").hasClass("btn-primary")&&A();e("#go2typeSelect").val("full"),G("Go2"),s.clearLayers(),a.clearLayers(),j(),e(".radarBtn").removeClass("active"),n.setView([MapY,MapX],7)}()})),e("#aboutButton").click((function(){e("#aboutModal").modal("show")})),l.on("click",(function(n){!function(n){if(console.log("OPENING POPUP...",n),e("#graphContainer").remove(),e(".graphLoader").remove(),t=void 0,e.ajaxQ.abortAll(),n.layer.bindPopup(n.layer.properties.popupContent,{minWidth:300}).openPopup(),"sw"===n.layer.properties.siteType||"gw"===n.layer.properties.siteType){e.getJSON(USGSwaterServicesURL+n.layer.properties.siteID+"&parameterCd=00060,00065,62614,62615,62619,72214,72264,72019&period=P7D",(function(r){if(!r.data||r.data[0].time_series_data.length<=0)return setTimeout((function(){e("#nwisGraphLoader").html("<p><i>No NWIS waterservices data was found</i></p>"),e("#ahpsGraphLoader").remove(),e("#nwmGraphLoader").remove()}),500),void console.log("Found an NWIS site, but it had no data in waterservices: ",n.layer.properties.siteID);var o,i;console.log("NWIS data:",r);var a,s=!1;if(e.each(r.data,(function(e,n){-1!==n.parameter_name.indexOf("Discharge")?(s=!0,o="Discharge, cfs",a={tooltip:{pointFormat:i="Discharge: {point.y} cfs"},showInLegend:!0,id:"usgs-series",data:n.time_series_data,name:"USGS Measured discharge"}):-1!==n.parameter_name.indexOf("Elevation")?(n.parameter_name+=", ft",n.loc_web_ds.length>0?n.parameter_name+=" ("+n.loc_web_ds+")":o=n.parameter_name,i=n.parameter_name+": {point.y}",a={tooltip:{pointFormat:i},showInLegend:!1,id:"usgs-series",data:n.time_series_data,name:n.parameter_name}):"Water level, depth LSD"===n.parameter_name?(o="Elevation, ft",a={tooltip:{pointFormat:i="Elevation: {point.y} ft"},showInLegend:!1,id:"usgs-series",data:n.time_series_data,name:n.parameter_name}):-1===n.parameter_name.indexOf("Gage height")||s||(n.parameter_name+=", ft",n.loc_web_ds.length>0?n.parameter_name+=" ("+n.loc_web_ds+")":o=n.parameter_name,i=n.parameter_name+": {point.y}",a={tooltip:{pointFormat:i},showInLegend:!1,id:"usgs-series",data:n.time_series_data,name:n.parameter_name})})),!s)return t=void 0,console.log("This is a gw or non disharge site, so were done"),e(".graphLoader").remove(),void I(a,o);if(e("#nwisGraphLoader").remove(),I(a,o),N[n.layer.properties.siteID].properties.nws_id&&"n/a"!==N[n.layer.properties.siteID].properties.nws_id){console.log("Found AHPS site: ",N[n.layer.properties.siteID].properties.nws_id,"  Querying AHPS...");var l=AHPSurl+n.layer.properties.nws_id+"&output=xml";console.log("AHPS page url:",l),location.hostname.match("wim")&&(l=proxyURL+l),e.ajax({url:l,dataType:"xml",success:function(r){console.log("AHPS Response:",r);var t=[],a=!1;if(e(r).find("forecast").find("datum").each((function(){var n=e(this).find("valid").text();if(!s&&"Stage"===e(this).find("primary").attr("name")){var r=e(this).find("primary").attr("units"),o=parseFloat(e(this).find("primary").text());a=!0}if(s&&"Flow"===e(this).find("secondary").attr("name")){r=e(this).find("secondary").attr("units"),o=parseFloat(e(this).find("secondary").text());"kcfs"===r&&(o*=1e3),a=!0}if(a){var i=new Date(n)/1;t.push([i,o])}})),t.sort(),t.length<=1)return console.log("Found an AHPS Site, but no AHPS data was found: ",n.layer.properties.siteID,n.layer.properties.ahpsID),void e("#ahpsGraphLoader").remove();var l={tooltip:{pointFormat:i},showInLegend:!0,color:"#009933",name:"NWS River Forecast (AHPS)",id:"ahps-series",data:t};e("#ahpsGraphLoader").remove(),I(l,o)}})}else console.log("This is not an AHPS site:",n.layer.properties.siteID),e("#ahpsGraphLoader").remove();var p=Object(_.c)({url:NWMmapServiceURL}),c="site_no = '"+n.layer.properties.siteID+"'";e("#graphContainer").append("LOADING NWM DATA... Please Wait"),p.where(c),p.run((function(r,t,a){if(r)console.log(r);else if(0!=t.features.length){console.log("NWM Feature query results:",t);var s=t.features[0].properties.feature_id;22743145==s&&(s=22743167),console.log("Found NWM reach code: ",s,"  Querying NWM...");var l=NWMshortRangeURL+s;console.log("NWM page url:",l),location.hostname.match("wim")&&(l=proxyURL+l),e.ajax({url:l,dataType:"json",success:function(r){console.log("NWM Short Range Response:",r);var a=[];r[0].data.length;r[0]["reference-time"],r[0].units;e.each(r[0].data,(function(e,n){var r=n["forecast-time"],t=n.value,o=new Date(r)/1;a.push([o,t])})),a.sort();var l=a[a.length-1];console.log("Last short range NWM value:",l);var p=NWMmediumRangeURL+s;location.hostname.match("wim")&&(p=proxyURL+p),e.ajax({url:p,dataType:"json",success:function(r){console.log("NWM Medium Range Response:",r),r[0].data.length>0&&!0;r[0]["reference-time"],r[0].units;e.each(r[0].data,(function(e,n){var r=n["forecast-time"],t=n.value,o=new Date(r)/1;o>l[0]&&a.push([o,t])})),a.sort(),a.length<=1&&(console.log("Found a NWM Site, but no NWM data was found: ",n.layer.properties.siteID,n.layer.properties.nwm_reach_code),e("#nwmGraphLoader").remove(),reteurn);var s={tooltip:{pointFormat:i},showInLegend:!0,color:"#AF18EC",name:"NWM River Forecast for "+t.features[0].properties.site_name,id:"nwm-series",data:a};e("#nwmGraphLoader").remove(),I(s,o)}})}})}else console.log("Did not find NWM site for USGS Site: ",n.layer.properties.siteID)}))}))}}(n)})),n.on("popupopen",(function(e){var r=n.project(e.target._popup._latlng);r.y-=e.target._popup._container.clientHeight/2,n.panTo(n.unproject(r),{animate:!0})})),setTimeout((function(){n.invalidateSize()}),500)}))}.call(this,r(8))},29:function(e,n,r){var t=r(5),o=r(30);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1};t(o,i);e.exports=o.locals||{}},30:function(e,n,r){(n=r(6)(!1)).push([e.i,'/* ======================== \r\n=========================== \r\nBase app layout \r\n=========================== \r\n=========================== */\r\nhtml, body, #mapDiv {\r\n\tpadding: 0;\r\n\tmargin: 0;\r\n\theight: 100%;\r\n\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\r\n}\r\n.leaflet-popup-content-wrapper {\r\n\tborder-radius: 0px;\r\n}\r\n.app-wrapper{\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\theight: 100%;\r\n\twidth: 100%;\r\n}\r\n/* ======================== \r\n=========================== \r\nUSGS Navigation Bar \r\n=========================== \r\n=========================== */\r\n.top-bar{\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\twidth: 100%;\r\n\tmin-width: 100%;\r\n\tbackground-color: #022C55;\r\n\tbox-sizing: border-box;\r\n\tpadding: 0 15px;\r\n\theight: 58px;\r\n}\r\n/* Menu button - only shown on mobile */\r\n.top-bar-mobile-menu-button{\r\n\tdisplay: none;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\tcolor: white;\r\n\twidth: 40px;\r\n\ttext-align: center;\r\n\tfont-size: 24px;\r\n\tmargin-right: 15px;\r\n}\r\n.top-bar-mobile-menu-button .mobile-icon-open{\r\n\twidth: 100%;\r\n\ttext-align: center;\r\n}\r\n.top-bar-mobile-menu-button .mobile-icon-close{\r\n\tdisplay: none;\r\n\tfont-size: 42px;\r\n\tbox-sizing: border-box;\r\n\tpadding: 0 0 8px 0;\r\n}\r\n/* Show on mobile */\r\n@media (max-width: 767px) {\r\n\t.top-bar-mobile-menu-button{\r\n\t\tdisplay: flex;\r\n   }\r\n}\r\n/* Branding - USGS logo and name */\r\n.top-bar-branding{\r\n\tflex-grow: 3;\r\n\tdisplay: flex;\r\n}\r\n.top-bar-logo{\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n}\r\n.top-bar-logo img{\r\n\theight: 50px;\r\n\twidth: auto;\r\n}\r\n/* Shrink on mobile */\r\n@media (max-width: 767px) {\r\n\t.top-bar-logo img{\r\n\t\theight: 40px;\r\n   }\r\n}\r\n.top-bar-app-name{\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\tfont-size: 18px;\r\n\tfont-weight: 500;\r\n\tpadding: 0 0 2px 25px;\r\n\tbox-sizing: border-box;\r\n\tcolor: white;\r\n\tline-height: 20px;\r\n}\r\n/* Shrink on mobile */\r\n@media (max-width: 767px) {\r\n\t.top-bar-app-name{\r\n\t\tfont-size: 16px;\r\n\t\tline-height: 18px;\r\n\t\tpadding: 0 0 0 15px;\r\n   }\r\n}\r\n.top-bar-right{\r\n\tdisplay: flex;\r\n\tjustify-content: flex-end;\r\n}\r\n.top-bar-right button{\r\n\tborder: none;\r\n\tbackground-color: white;\r\n\tcolor: #022C55;\r\n\tborder-radius: 3px;\r\n\tbox-sizing: border-box;\r\n\ttransition: 0.15s;\r\n\tfont-weight: 600;\r\n\tfont-size: 14px;\r\n\tpadding: 3px 12px;\r\n}\r\n.top-bar-right button:hover{\r\n\tbackground-color: rgba(255,255,255,0.9);\r\n\ttransition: 0.15s;\r\n}\r\n.top-bar-right-item{\r\n\tdisplay: flex;\r\n\tmargin-left: 15px;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n}\r\n/* ======================== \r\n=========================== \r\nSidebar and Map \r\n=========================== \r\n=========================== */\r\n.app-body{\r\n\tdisplay: flex;\r\n\tflex-grow: 3;\r\n}\r\n\r\n#NWSlegend {\r\n\tposition: absolute;\r\n    z-index: 1000;\r\n}\r\n\r\n#main-menu {\r\n\twidth: 400px;\r\n\t/* min-width: 400px; */\r\n\ttransition: left .15s ease-in-out;\r\n\tbackground-color: #FFFFFF;\r\n\tz-index:1001;\r\n}\r\n/* Sidebar footer - developed by... */\r\n#sidebarFooter{\r\n\tdisplay: block;\r\n\ttext-align: center;\r\n\tfont-size: 14px;\r\n\tbox-sizing: border-box;\r\n\tpadding: 15px 10px;\r\n\tcolor: rgba(0,0,0,0.5);\r\n}\r\n#mapDiv{\r\n\twidth: 100%;\r\n\tflex-grow: 3;\r\n\tborder-left: 1px solid rgba(0,0,0,0.2);\r\n}\r\n/* Sidebar mobile toggle */\r\n@media (max-width: 500px) {\r\n   /* Slide menu out from left */\r\n\t.isOpenMenu #main-menu {\r\n\t\tleft: 0;\r\n   }\r\n   /* Change menu icon */\r\n\t.isOpenMenu .mobile-icon-close {\r\n\t\tdisplay: block;\r\n   }\r\n\t.isOpenMenu .mobile-icon-open {\r\n\t\tdisplay: none;\r\n   }\r\n\t#main-menu {\r\n\t\tposition: absolute;\r\n\t\tleft: -100%;\r\n\t\twidth: 100%;\r\n\t\t/* max-width: 400px; */\r\n\t\theight: 100%;\r\n\t\theight: calc(100% - 58px);\r\n\t\tbox-shadow: 2px 0px 25px -4px rgba(30,30,60,0.15);\r\n   }\r\n}\r\n/* ======================== \r\n=========================== \r\nUSGS Bottom Footer \r\n=========================== \r\n=========================== */\r\n.usgs-footer {\r\n\tbackground: #10152C;\r\n\tbox-sizing: border-box;\r\n\tpadding: 5px 0;\r\n\twidth: 100%;\r\n\tcolor: rgba(255,255,255,.5);\r\n\tfont-size:12px \r\n}\r\n@media (max-width:767px) {\r\n\t.usgs-footer {\r\n\t\ttext-align: center;\r\n   }\r\n}\r\n\r\n/* Uncomment the @media block below to hide on mobile */\r\n/* @media (max-width:767px) {\r\n\t.usgs-footer {\r\n\t\tdisplay: none !important;\r\n   }\r\n}*/\r\n\r\n\r\n.usgs-footer .tmp-container {\r\n\tmargin-right: auto;\r\n\tmargin-left: auto;\r\n\tpadding-left: 15px;\r\n\tpadding-right: 15px \r\n}\r\n.usgs-footer .tmp-container .footer-doi a {\r\n\tpadding: 2px 5px;\r\n\tcolor: rgba(255,255,255,.8);\r\n\ttransition: .15s \r\n}\r\n.usgs-footer .tmp-container .footer-doi a:hover {\r\n\tcolor: #fff;\r\n\ttransition: .15s \r\n}\r\n.usgs-footer .tmp-container hr {\r\n\tmargin: 3px auto !important;\r\n\topacity: .2 \r\n}\r\n\r\n/* ======================== \r\n=========================== \r\nMain Menu \r\n=========================== \r\n=========================== */\r\n.js-typeahead {\r\n   /* border:0px !important;\r\n\t*/\r\n\tborder-radius: 0.25rem!important;\r\n}\r\n.typeahead__container {\r\n\twidth:100%;\r\n}\r\n.select2 {\r\n\twidth: 100%!important;\r\n\tmargin-bottom: 5px;\r\n}\r\n.select2-selection--multiple .select2-search__field{\r\n\twidth:100%!important;\r\n}\r\n#siteIDFilter {\r\n\tpadding-right:0px!important;\r\n}\r\n#optionsPanel button {\r\n\tmargin-bottom:5px;\r\n\twidth: 100%;\r\n}\r\n#optionsPanel .card {\r\n\tbackground-color: #ECEEF3;\r\n}\r\n.select2-selection__choice {\r\n\tfont-size:12px;\r\n}\r\n#legend .circle {\r\n\tborder-radius: 50%;\r\n\twidth: 12px;\r\n\theight: 12px;\r\n\tfloat: left;\r\n\tmargin-top: 8px;\r\n}\r\n#legend span {\r\n\tpadding-left:16px;\r\n\tfont-size: 12px;\r\n}\r\n#legend .card-text {\r\n\theight: 40px;\r\n}\r\n#layersPanel .card {\r\n\tbackground-color: #ECEEF3;\r\n}\r\n.menu-content{\r\n\theight:100% \r\n}\r\n.menu-content .scrollable-content{\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: space-between;\r\n\theight: 100%;\r\n}\r\n#main-menu .main-menu-container {\r\n\tposition: relative;\r\n\toverflow-y: auto;\r\n\theight: 100%;\r\n}\r\n#main-menu .sidebar-panel {\r\n\tbackground-color: #ffffff;\r\n\tmargin: 0 auto;\r\n\tborder: none;\r\n\tborder-bottom: 1px solid rgba(0,0,0,0.15);\r\n}\r\n .card-header > svg {\r\n\tfloat: right;\r\n}\r\n/*.card-header:after {\r\n\tfont-family: \'Font Awesome 5 Free\';\r\n\tcontent: \'\\f068\';\r\n\tfont-weight: 900;\r\n\tdisplay:none;\r\n}\r\n.card-header.collapsed:after {\r\n\tfont-family: "Font Awesome 5 Free";\r\n\tcontent: "\\f067";\r\n\tfont-weight: 900;\r\n\tdisplay:none;\r\n} */\r\n#main-menu .sidebar-panel .card-title {\r\n\tfont-size: 12pt;\r\n\tfont-weight: 600;\r\n   /* text-align: right;\r\n\t*/\r\n}\r\n#main-menu .sidebar-panel .card-header {\r\n\tbox-sizing: border-box;\r\n\tdisplay: block;\r\n\twidth: 100%;\r\n\tpadding: 15px;\r\n\tcolor: rgba(0,0,0,0.8);\r\n\tbackground-color: #ECEEF3;\r\n\tborder-top: 1px solid rgba(0,0,0,0.15);\r\n}\r\n#main-menu .sidebar-panel .card-header:hover {\r\n\tcursor: pointer;\r\n\tbackground-color: rgba(255, 255, 255, 0.5);\r\n\tcolor: #000;\r\n}\r\n#main-menu .slick-btn {\r\n\tborder: none;\r\n\toutline: none;\r\n\tborder-radius: 0;\r\n\tfont-size: 9pt;\r\n\tbox-sizing: border-box;\r\n\tpadding: 5px;\r\n\tdisplay: block;\r\n\twidth: 100%;\r\n\ttext-align: left;\r\n\tcolor: #6F758E;\r\n\tmargin: 0 auto;\r\n\tborder-left: 4px solid transparent;\r\n}\r\n#main-menu .slick-btn img {\r\n\theight: 25px;\r\n\tvertical-align: middle;\r\n\tdisplay: inline-block;\r\n\tmargin: 0 15px 0 0;\r\n\tborder-radius: 0;\r\n\tborder: none;\r\n}\r\n#main-menu .slick-btn br {\r\n\tdisplay: none;\r\n}\r\n#main-menu .slick-btn:hover {\r\n\tborder-color: #333;\r\n\tbackground-color: rgba(236, 238, 243, 0.5);\r\n}\r\n#main-menu .slick-btn:focus {\r\n\tbackground-color: #ECEEF3;\r\n\tborder-color: #4574CC;\r\n}\r\n#main-menu .slick-btn-selection {\r\n\tbackground-color: rgba(117, 136, 184, 0.5);\r\n\tborder-color: #4574CC !important;\r\n}\r\n.footer-links {\r\n\tfont-weight: 300;\r\n\tletter-spacing: 1.5px;\r\n\tbox-sizing: border-box;\r\n\tpadding: 10px;\r\n\tdisplay: block;\r\n\ttext-align: center;\r\n\topacity: .5;\r\n\tpadding:3px;\r\n}\r\n.footer-links a {\r\n\tdisplay: inline-block;\r\n\tbox-sizing: border-box;\r\n\tpadding: 0 4px;\r\n\tfont-size: 8pt;\r\n}\r\n.footer-icons {\r\n\tpadding: 10px;\r\n\tletter-spacing: 6px;\r\n\ttext-align: center;\r\n\topacity: .5;\r\n}\r\n/************* END MAIN MENU **************/',""]),e.exports=n},50:function(e,n,r){var t={"./en-au":10,"./en-au.js":10,"./en-ca":11,"./en-ca.js":11,"./en-gb":12,"./en-gb.js":12,"./en-ie":13,"./en-ie.js":13,"./en-il":14,"./en-il.js":14,"./en-in":15,"./en-in.js":15,"./en-nz":16,"./en-nz.js":16,"./en-sg":17,"./en-sg.js":17};function o(e){var n=i(e);return r(n)}function i(e){if(!r.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}o.keys=function(){return Object.keys(t)},o.resolve=i,e.exports=o,o.id=50}});